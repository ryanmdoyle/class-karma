# Migration `20201218235508-migration`

This migration has been generated by Ryan Doyle at 12/18/2020, 3:55:08 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Behavior" ADD COLUMN     "groupId" TEXT NOT NULL

ALTER TABLE "Feedback" ADD COLUMN     "behaviorId" TEXT NOT NULL

ALTER TABLE "Reward" ADD COLUMN     "groupId" TEXT NOT NULL

ALTER TABLE "Behavior" ADD FOREIGN KEY("groupId")REFERENCES "Group"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Feedback" ADD FOREIGN KEY("behaviorId")REFERENCES "Behavior"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Reward" ADD FOREIGN KEY("groupId")REFERENCES "Group"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201206221653-postgres..20201218235508-migration
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource DS {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "prisma-client-js"
@@ -35,19 +35,24 @@
   userId    String
 }
 model Feedback {
-  id        String   @id @default(uuid())
-  type      String
-  createdAt DateTime
-  user      User     @relation(fields: [userId], references: [id])
-  userId    String
+  id         String   @id @default(uuid())
+  type       String
+  createdAt  DateTime
+  user       User     @relation(fields: [userId], references: [id])
+  userId     String
+  behavior   Behavior @relation(fields: [behaviorId], references: [id])
+  behaviorId String
 }
 model Behavior {
-  id    String @id @default(uuid())
-  name  String
-  value Int
+  id       String     @id @default(uuid())
+  name     String
+  value    Int
+  group    Group      @relation(fields: [groupId], references: [id])
+  groupId  String
+  feedback Feedback[]
 }
 model Redeemed {
   id        String   @id @default(uuid())
@@ -61,8 +66,10 @@
 model Reward {
   id       String     @id @default(uuid())
   name     String
   cost     Int
+  group    Group      @relation(fields: [groupId], references: [id])
+  groupId  String
   redeemed Redeemed[]
 }
 model Group {
@@ -72,8 +79,10 @@
   description String?      @default("")
   owner       User         @relation(fields: [ownerId], references: [id])
   ownerId     String
   enrollments Enrollment[]
+  behaviors   Behavior[]
+  rewards     Reward[]
 }
 model Enrollment {
   id      String @id @default(uuid())
```


