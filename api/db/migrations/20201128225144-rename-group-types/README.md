# Migration `20201128225144-rename-group-types`

This migration has been generated by Ryan Doyle at 11/28/2020, 2:51:44 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "PrimaryGroup" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "ownerId" TEXT NOT NULL,

    FOREIGN KEY ("ownerId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    PRIMARY KEY ("id")
)

CREATE TABLE "SecondaryGroup" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "ownerId" TEXT NOT NULL,

    FOREIGN KEY ("ownerId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    PRIMARY KEY ("id")
)

CREATE TABLE "PrimaryEnrollment" (
    "id" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "primaryGroupId" TEXT NOT NULL,

    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("primaryGroupId") REFERENCES "PrimaryGroup"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    PRIMARY KEY ("id")
)

CREATE TABLE "SecondaryEnrollment" (
    "id" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "secondaryGroupId" TEXT NOT NULL,

    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("secondaryGroupId") REFERENCES "SecondaryGroup"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    PRIMARY KEY ("id")
)
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201110222409-migration..20201128225144-rename-group-types
--- datamodel.dml
+++ datamodel.dml
@@ -1,30 +1,34 @@
 datasource DS {
   // optionally set multiple providers
   // example: provider = ["sqlite", "postgresql"]
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "prisma-client-js"
-  binaryTargets = ["native", "rhel-openssl-1.0.x"]
+  binaryTargets = "native"
 }
 // Define your own datamodels here and run `yarn redwood db save` to create
 // migrations for them.
 // TODO: Please remove the following example:
 model User {
-  id        String     @id @default(uuid())
-  firstName String
-  lastName  String
-  email     String
-  createdAt DateTime   @default(now())
-  updatedAt DateTime   @default(now())
-  roles     UserRole[]
-  Feedback  Feedback[]
-  Redeemed  Redeemed[]
+  id              String                @id @default(uuid())
+  firstName       String
+  lastName        String
+  email           String
+  createdAt       DateTime              @default(now())
+  updatedAt       DateTime              @default(now())
+  roles           UserRole[]
+  Feedback        Feedback[]
+  Redeemed        Redeemed[]
+  ClassEnrollment PrimaryEnrollment[]
+  GroupEnrollment SecondaryEnrollment[]
+  PrimaryGroup    PrimaryGroup[]
+  SecondaryGroup  SecondaryGroup[]
 }
 model UserRole {
   id        String   @id @default(uuid())
@@ -63,4 +67,38 @@
   name     String
   cost     Int
   Redeemed Redeemed[]
 }
+
+// Check below for working in scaffolds
+
+model PrimaryGroup {
+  id                String              @id @default(uuid())
+  name              String
+  owner             User                @relation(fields: [ownerId], references: [id])
+  ownerId           String
+  PrimaryEnrollment PrimaryEnrollment[]
+}
+
+model SecondaryGroup {
+  id                  String                @id @default(uuid())
+  name                String
+  owner               User                  @relation(fields: [ownerId], references: [id])
+  ownerId             String
+  SecondaryEnrollment SecondaryEnrollment[]
+}
+
+model PrimaryEnrollment {
+  id             String       @id @default(uuid())
+  user           User         @relation(fields: [userId], references: [id])
+  userId         String
+  primaryGroup   PrimaryGroup @relation(fields: [primaryGroupId], references: [id])
+  primaryGroupId String
+}
+
+model SecondaryEnrollment {
+  id               String         @id @default(uuid())
+  user             User           @relation(fields: [userId], references: [id])
+  userId           String
+  secondaryGroup   SecondaryGroup @relation(fields: [secondaryGroupId], references: [id])
+  secondaryGroupId String
+}
```


